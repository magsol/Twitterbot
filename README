== PHP Twitterbot ==

This is designed to be a relatively lightweight, flexible framework for
deploying your own customized and automated twittering bot that more or
less does whatever you program it to do.

Author: Shannon Quinn
Project Wiki: http://magsolweb.net/wiki/index.php5?title=SpamBot
Git repository: https://github.com/magsol/Twitterbot
Version: 2.0 (alpha)

= NOTES =

THIS IS STILL VERY MUCH EXPERIMENTAL AND NOT PARTICULARLY ROBUST. I implemented
the process control without much previous experience in it (most of my experience
is in multithreading with C...not very applicable to this), so it is still very
rough around the edges, particularly with the database connection management.

If you encounter any bugs, please don't hesitate to report them, either to the
github page, or you can email me: magsol at gmail.

= REQUIREMENTS =

In order to run this bot, you need:

-PHP 5.x
-PEAR and its basic libraries (in particular, pcntl and cli)
-MySQL 5.x (though will probably work with 4.x)
-A brave soul

= SETUP =

1) Fill out the necessary fields in config.php (there are several).
-BOT_ACCOUNT: The display name for your bot.
-BOT_PASSWORD: The password to log into your bot (will be removed once Twitter's
Streaming API is integrated into OAuth...for now, a necessary evil).
-CONSUMER_KEY: OAuth Consumer Key, obtained by creating an app for this bot.
-CONSUMER_SECRET: Same as above.
-OAUTH_TOKEN: Same as above.
-OAUTH_TOKEN_SECRET: Same as above.
-DB_NAME: Name of the database this application's data can be stored in.
-DB_HOST: Host on which the database resides (usually "localhost").
-DB_USER: Username of the account that has admin access to the DB_NAME database.
-DB_PASS: Password for the above user.

Within the $actions array you have optional definitions (required if you want
the bot to do anything interesting) to customize how your bot behaves. If you
leave everything blank, it will simply aggregate posts from Twitter's public
timeline (you'll see them grow quite fast within your database).

If you choose to add some fields, you'll need to implement your own Action 
subclass that performs whatever action of interest you want. Obeying the usual
object-oriented programming guidelines generally makes for better-behaved bots,
but in general you can have your action do whatever you want. Just be sure
to fill in the required fields for any defined Action:
-name (can be anything, used mainly for debugging)
-class (case-sensitive name of the class you created)
-file (case-sensitive name of the PHP file in which your class resides)
-active (boolean indicating whether or not this action should be fired)
-args (optional array of arguments, specific to your action)

2) Run the bot's install script.

php install.php

This will use the database values defined in your config.php to set up your
database's schema. For optimal behavior, please only fire this script once.
It shouldn't cause any unintended behavior if you execute it multiple times 
(it will simply quit if it detects the tables exist already), but why would
you need to run the install script multiple times anyway?

3) Test the bot's settings.

php run.php --tests-only

This will have the bot run a battery of tests against the settings you've 
indicated. If there are any failures, it will halt immediately and let you
know (wrong database username/password, a missing required field for a custom
Action, etc).

4) Run the bot!

php run.php

You can include a -h flag to display all the available options. By default 
(run with no arguments), the script will execute the battery of tests like in
step 3 but will, pending all tests passing, start up the bot itself. The bot
will behave as a daemon, detaching itself from the terminal and spawning a child
process for each custom Action defined in config.php. In order to kill the daemon
and its child processes, run the command:

php run.php --stop

= ACKNOWLEDGEMENTS =

There are several people who made this project possible.

-Rob Hall (http://cs.cmu.edu/~rjhall): the original inspiration, with his 
hilarious postmaster9001 bot (http://twitter.com/postmaster9001), whose awful 
Perl hack-job implementation inspired me to make something more flexible
and robust.

-Abraham of twitteroauth (https://github.com/abraham/twitteroauth): His library
makes the implementation of OAuth authentication in this project possible. That's
one huge black box that is reduced to one or two lines of code on my part to worry
about. Awesome, awesome work.

-Fennb of Phirehose (https://github.com/fennb/phirehose): Again, a huge, rich,
robust API that makes my life really freaking easy. This makes data aggregation
possible in this project, enabling me to spend my time doing interesting things with
the data rather than finding ways of crawling Twitter. Keep up the good work.

-Sebastian Bergmann of PHPUnit (https://github.com/sebastianbergmann/phpunit/): Author
of a phenomenal unit-testing framework for PHP, it's still on my to-do list to incporporate
it into this bot's testing. It will definitely happen, and this guy has made it a lot
easier.
